@page
@model TASVideos.Pages.Reports.IndexModel
@{
	ViewData.SetTitle("Reports");
}
<h1>Reports</h1>

<div class="mb-3">
	<a asp-page="/Reports/Index" asp-route-showResolved="false" class="btn btn-primary">Unresolved</a>
	<a asp-page="/Reports/Index" asp-route-showResolved="true" class="btn btn-secondary">All Reports</a>
</div>

@if (!Model.Reports.Any())
{
	<p>No reports found.</p>
}
else
{
	@foreach (var report in Model.Reports)
	{
		<card class="report-card mb-3">
			<card-header class="d-flex justify-content-between align-items-center">
				<h5>Report #@report.Id</h5>
				@if (report.Resolved)
				{
					<span class="badge bg-success">Resolved</span>
				}
				else
				{
					<span class="badge bg-warning">Pending</span>
				}
			</card-header>
			<card-body>
				<p><strong>Forum Post ID:</strong> @report.ForumPostId</p>
				<p><strong>Reporter:</strong> @report.ReporterName</p>
				<p><strong>Reported On:</strong> @report.ReportedOn.ToString("yyyy-MM-dd HH:mm")</p>
				<p><strong>Reason:</strong> @report.Reason</p>

				@if (report.Resolved)
				{
					<hr />
					<p><strong>Resolved By:</strong> @report.ResolvedByUserName</p>
					<p><strong>Resolved On:</strong> @report.ResolvedOn?.ToString("yyyy-MM-dd HH:mm")</p>
					<p><strong>Resolution:</strong> @report.Resolution</p>
				}
				else
				{
					<a asp-page="/Reports/Resolve" asp-route-id="@report.Id" class="btn btn-sm btn-primary">Resolve</a>
				}
			</card-body>
		</card>
	}
}
